@(user: org.intracer.finance.User,
        operations: Seq[org.intracer.finance.Operation],
        total: Double,
        projects: Set[String],
        categories: Set[String],
        grants: Set[String],
        daterange: String)(implicit flash: Flash, lang: Lang)

@main(Messages("operations"), user) {

    @filter(operations, projects, categories, grants, daterange, "/operations")

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th style="width:60pt">@Messages("date")</th>
                <th>@Messages("project")</th>
                <th>@Messages("category")</th>
                <th>@Messages("grant")</th>
                <th>@Messages("amount")</th>
                <th>@Messages("desc")</th>
            </tr>
        </thead>
        <tbody>
        @for(operation <- operations) {
            <tr>
                <td> @operation.date.toString().substring(0, 10) </td>
                <td> @operation.to.project </td>
                <td> @operation.to.category </td>
                <td> @if(operation.to.grantUrl.isDefined) {
                    <a href="@operation.to.grantUrl.get._1">@operation.to.grantUrl.get._2</a>
                    } else {
                        @operation.to.grant
                    }
                </td>
                <td> @operation.amountString </td>
                <td> @operation.to.desc </td>
            </tr>
        }
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4">@Messages("total") </td>
                <td colspan="2">@org.intracer.finance.Formatter.fmt.format(total) </td>
            </tr>
        </tfoot>
    </table>
}