@(user: org.intracer.finance.User,
        operations: Seq[org.intracer.finance.Operation],
        total: Double,
        projects: Set[String],
        categories: Set[String],
        grants: Set[String],
        daterange: String,
        url: String)(implicit flash: Flash, lang: Lang, messages: Messages)

@main(Messages("operations"), user) {

    <div class="row">

    @filter(operations, projects, categories, grants, daterange, url)

    <table class="table table-striped table-bordered" id="operations">
        <thead>
            <tr>
                <th style="width:60pt">@Messages("date")</th>
                <th>@Messages("project")</th>
                <th>@Messages("category")</th>
                <th>@Messages("grant.row")</th>
                <th>@Messages("grant")</th>
                <th>@Messages("amount")</th>
                <th>@Messages("desc")</th>
            </tr>
        </thead>
        <tbody>
        @for(operation <- operations) {
            <tr>
                <td> @operation.date.toString().substring(0, 10) </td>
                <td> @operation.to.projectName </td>
                <td> @operation.to.categoryName </td>
                <td> @operation.to.grantRow.getOrElse("") </td>
                <td> @if(operation.to.grantUrl.isDefined) {
                    <a href="@operation.to.grantUrl.get._1">@operation.to.grantUrl.get._2</a>
                    } else {
                        @operation.to.grantName
                    }
                </td>
                <td>
                    <a href="#" class="editable" data-type="text" data-pk="@operation.to.id.getOrElse(0)" data-url="/post" data-title="@Messages("amount")">
                        @operation.amountString
                    </a>
                </td>
                <td>
                    <a href="#" class="editable" data-type="text" data-pk="@operation.to.id.getOrElse(0)" data-url="/post" data-title="@Messages("desc")">
                        @operation.to.desc
                    </a>
                </td>
            </tr>
        }
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4">@Messages("total") </td>
                <td colspan="2">@org.intracer.finance.Formatter.fmt.format(total) </td>
            </tr>
        </tfoot>
    </table>
    </div>
}