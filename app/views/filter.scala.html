@(operations: Seq[org.intracer.finance.Operation],
        projects: Set[Int],
        categories: Set[Int],
        grants: Set[Int],
        daterange: String,
        action: String,
        rate: Option[Double] = None)(implicit flash: Flash, lang: Lang, messages: Messages)

@import org.intracer.finance.slick.Expenditures
<form class="form-vertical" action="@action" method="get" style="margin-bottom: 5px">
    <fieldset>

        <div class="row">

            <div class="span9">
                <label class="control-label" for="projects_select" style="width: 60pt">@Messages("projects")</label>
                <select id="projects_select" class="selectpicker" multiple name="projects">
                @for((id, project) <- Expenditures.projects.toSeq.sortBy(_._2.name.toLowerCase)) {
                    <option value="@id" @if(projects.contains(id)) {selected}>@project.name </option>
                }
                </select>
            </div>

            <div class="span9">
                <label class="control-label" for="categories_select" style="width: 60pt">@Messages("categories")</label>
                <select id="categories_select" class="selectpicker" multiple name="categories">
                @for((id, category) <- Expenditures.categories.toSeq.sortBy(_._2.name.toLowerCase)) {
                    <option value="@id" @if(categories.contains(id)) {selected}>@category.name </option>
                }
                </select>
            </div>

            <div class="span9">
                <label class="control-label" for="grants_select" style="width: 60pt">@Messages("grants")</label>
                <select id="grants_select" class="selectpicker" multiple name="grants">
                @for((id, grant) <- Expenditures.grants.toSeq.sortBy(_._2.name.toLowerCase)) {
                    <option value="@id" @if(grants.contains(id)) {selected}>@grant.name </option>
                }
                </select>
            </div>

            <div class="span3">
                <label class="control-label" for="reservation">@Messages("dates")</label>
                <div class="controls">
                    <div class="input-prepend">
                        <span class="add-on"><i class="icon-calendar"></i></span>
                        <input type="text" style="width: 180px" name="daterange" id="daterange" value="@daterange" />
                    </div>
                </div>
            </div>

            @if(rate.isDefined) {
                <div class="span3">
                    <label class="control-label" for="rate">@Messages("rate")</label>
                    <input type="text" style="width: 180px" name="rate" id="rate" value="@rate.get" />
                </div>
            }

            <div class="span3">
                <button type="submit" class="btn btn-primary" style="margin-top: 18pt">@Messages("filter")</button>
            </div>
        </div>

    </fieldset>
</form>

<script type="text/javascript">
        $(document).ready(function () {
            $('#daterange').daterangepicker();
        });
</script>

