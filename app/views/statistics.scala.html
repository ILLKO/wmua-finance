@(        operations: Seq[org.intracer.finance.Operation],
        projects: Set[String],
        categories: Set[String],
        grants: Set[String],
        daterange: String,
        operationsByProject: Map[String, Iterable[org.intracer.finance.Operation]],
        operationsByCategory: Map[String, Iterable[org.intracer.finance.Operation]],
        operationsByGrant: Map[String, Iterable[org.intracer.finance.Operation]],
        operationsByProjectAndCategory: Map[String, Iterable[org.intracer.finance.Operation]]
        )(implicit flash: Flash, lang: Lang)

@import org.intracer.finance.Operation
@import scala.collection.mutable.HashMap



    @statGrid(tableName: String, groupName: String, mapping: HashMap[String, String], groupedOperations: Map[String, Iterable[Operation]]) = {

        <table class="table table-striped table-bordered">
            <caption>@tableName</caption>
            <tr>
                <th>@groupName</th>
                <th>@Messages("amount")</th>
            </tr>
            @for(groupId <- groupedOperations.keys.toSeq.sorted) {

                <tr>
                    <td>
                    @mapping(groupId)
                    </td>
                    <td>
                    @groupedOperations(groupId).map(_.amount).sum
                    </td>
                </tr>
            }
        </table>
    }


@main(Messages("operations")) {
    @filter(operations, projects, categories, grants, daterange, "/statistics")
    @statGrid(Messages("by.project"), Messages("project"), Global.mapping.project, operationsByProject)
    @statGrid(Messages("by.category"), Messages("category"), Global.mapping.category, operationsByCategory)
    @statGrid(Messages("by.grant"), Messages("grant"), Global.mapping.grant, operationsByGrant)

}



